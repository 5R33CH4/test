(window.webpackJsonp=window.webpackJsonp||[]).push([[522],{ISr9:function(t,e,i){"use strict";i.r(e);i("TMXb");var s=i("VTBJ"),n=i("L2JU"),a=i("LvDl"),o=i("1OyB"),h=i("vuIU"),r=i("rePB"),c=i("pc+1"),l=i("z/o8"),u=null,p=null,b=null,v=c.b.easeOut.config(1.4,.3),f={duration:1.6,ease:v},d=function(){function t(e){var i=e.scope,s=e.index,n=e.path,a=e.start;Object(o.a)(this,t),Object(r.a)(this,"scope",null),Object(r.a)(this,"start",null),Object(r.a)(this,"path",null),Object(r.a)(this,"shape",null),Object(r.a)(this,"animation",null),this.index=s,this.path=n,this.start=a,this.scope=i,b||(b=i),this.setup()}return Object(h.a)(t,[{key:"pointSymbol",get:function(){if(u)return u;if(!b)return null;var t=new b.Path.Circle({center:[0,0],radius:4,fillColor:"white",strokeColor:"red"});return u=new b.Symbol(t.rasterize()),t.remove(),u}}],[{key:"mouse",set:function(t){if(t)p=t;else{if(!b)return;p={delta:new b.Point(0,0),point:new b.Point(0,0)}}}}]),Object(h.a)(t,[{key:"setup",value:function(){this.shape=this.pointSymbol.place(this.start),this.shape.parent=this.path.parent,this.animation=l.b.timeline({ease:v}),this.shape.visible=!1}},{key:"destroy",value:function(){var t,e,i=this;null===(t=this.animation)||void 0===t||null===(e=t.kill)||void 0===e||e.call(t),Object(a.each)(this,(function(t,e){return delete i[e]}))}},{key:"refresh",value:function(){var t,e=this.start,i=this.animation.isActive(),s=this.path.segments[this.index],n=(null===(t=p)||void 0===t?void 0:t.point.y)||0,a=s.point.y,o=Math.abs(n-a),h=e.isClose(this.shape.position,.1);if(o<42.5)if(this.animation.clear(),Math.abs(n-e.y)>50)this.snapBack();else{var r=41.5*(n-a>=0?-1:1)+n;s.point.y=r,this.shape.position=s.point}else i||h||this.snapBack();return i||!h}},{key:"snapBack",value:function(){var t=this.start,e=this.shape.position,i=this.path.segments[this.index].point;this.animation.clear(),this.animation.to([i,e],Object(s.a)({x:t.x,y:t.y},f),0)}}]),t}(),w=function(){function t(e){var i=e.scope,n=e.view,a=e.size,h=e.lineSymbol,c=e.y,l=e.segments,u=void 0===l?2:l,p=e.lineStyle,b=void 0===p?{}:p;Object(o.a)(this,t),Object(r.a)(this,"scope",null),Object(r.a)(this,"smoothing",{type:"continuous"}),Object(r.a)(this,"group",null),Object(r.a)(this,"path",null),Object(r.a)(this,"shape",null),Object(r.a)(this,"controlPoints",[]);var v=a.width,f=n.center;this.scope=i,this.group=new this.scope.Group,this.path=new this.scope.Path(Object(s.a)({parent:this.group,strokeColor:"black",strokeHeight:1},b)),this.shape=h.place([f.x,c]),this.shape.parent=this.group,this.shape.visible=!1;for(var w=[],m=0;m<=u;m+=1){var y=m/u*v,O=new this.scope.Point(y,c),j=new d({scope:this.scope,path:this.path,start:O,index:m});this.controlPoints.push(j),w.push(O)}this.path.addSegments(w)}return Object(h.a)(t,[{key:"destroy",value:function(){var t=this;this.group.remove(),Object(a.each)(this.controlPoints,(function(t){return t.destroy()})),Object(a.each)(this,(function(e,i){return delete t[i]}))}},{key:"update",value:function(){for(var t=!1,e=this.path.segments.length-1,i=1;i<e;i+=1)this.controlPoints[i].refresh()&&(t=!0);t?(this.path.visible=!0,this.shape.visible=!1,this.smoothPath()):(this.path.visible=!1,this.shape.visible=!0)}},{key:"smoothPath",value:function(){this.path.smooth(this.smoothing)}}]),t}(),m={name:"ReactiveLine",components:{},props:{guides:{type:Array,default:function(){return[]}},mouse:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1}},data:function(){return{id:"contact-lines",inScreen:!1,lineStyle:{strokeColor:"black",strokeWidth:1},scope:null,view:null,size:{width:0,height:0},lines:[],lineSymbol:null,lineRaster:null,watchers:[]}},computed:Object(s.a)({},Object(n.b)({touch:"Interface/touch",viewport:"Interface/viewport",paper:"Paperjs/paper"})),watch:{mouse:function(t){d.mouse={point:t}}},mounted:function(){var t=this;this.$store.dispatch("Paperjs/LOAD").then(this.createView.bind(this)).then((function(){t.watchers.push(t.$watch("viewport",Object(a.debounce)(t.init.bind(t),30))),t.init()}))},beforeDestroy:function(){var t=this;this.view&&(Object(a.each)(this.lines,(function(t){return t.destroy()})),Object(a.each)(this.watchers,(function(t){return t()})),Object(a.each)(this.handlers,(function(e,i){return t.view.off(i,e)})),this.view.remove(),delete this.view,delete this.lines)},methods:{updateSize:function(){this.size=Object(a.pick)(this.view.bounds,["width","height"])},createView:function(t){var e=new t.PaperScope(this.$el);e.setup(this.$el);var i=e.getView(this.id);i.setAutoUpdate(!1),this.scope=e,this.view=i,this.updateSize()},init:function(){var t=this;this.updateSize(),Object(a.each)(this.lines,(function(t){return t.destroy()})),this.rasterizeLine();var e=Object(a.pick)(this,["scope","view","size","lineSymbol","lineStyle"]);this.$nextTick((function(){t.lines=Object(a.map)(t.guides,(function(t,i){return new w(Object(s.a)(Object(s.a)({index:i},e),{},{y:t.offsetTop}))}))}))},rasterizeLine:function(){var t,e=this.size.width,i=this.scope;null===(t=this.lineRaster)||void 0===t||t.remove();var n=new i.Path(Object(s.a)({segments:[[0,0],[e,0]]},this.lineStyle));n.visible=!0,n.segments=[[0,0],[e,0]],this.lineRaster=n.rasterize(),this.lineSymbol=new i.Symbol(this.lineRaster),n.visible=!1},render:function(){var t,e;null===(t=this.view)||void 0===t||null===(e=t.update)||void 0===e||e.call(t),Object(a.each)(this.lines,(function(t){return t.update()}))}}},y=(i("WUi/"),i("KHd+")),O=i("Mbh6"),j=i.n(O),k=Object(y.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("canvas",{staticClass:"canvas",attrs:{id:this.id,resize:""}})}),[],!1,null,"3792ef40",null);"function"==typeof j.a&&j()(k);e.default=k.exports},Mbh6:function(t,e){},"WUi/":function(t,e,i){"use strict";i("i1QM")},i1QM:function(t,e,i){}}]);