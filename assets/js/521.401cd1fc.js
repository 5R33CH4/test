(window.webpackJsonp=window.webpackJsonp||[]).push([[521],{LJoE:function(e,t,i){},a7WZ:function(e,t){},hgOt:function(e,t,i){"use strict";i("LJoE")},y8qp:function(e,t,i){"use strict";i.r(t);i("TMXb"),i("hHd6");var n,s=i("VTBJ"),a=i("L2JU"),o=i("LvDl"),l=i("1OyB"),h=i("vuIU"),r=i("rePB"),c=i("pc+1"),u=i("z/o8"),v=null,p=null,d=null,b=c.b.easeOut.config(1.4,.3),f={duration:1.6,ease:b},m=function(){function e(t){var n=this,s=t.index,a=t.path,o=t.start;Object(l.a)(this,e),Object(r.a)(this,"start",null),Object(r.a)(this,"path",null),Object(r.a)(this,"shape",null),Object(r.a)(this,"animation",null),this.index=s,this.path=a,this.start=o,d?this.setup():Promise.all([i.e(5),i.e(6)]).then(i.t.bind(null,"IiLU",7)).then((function(e){d=e.default,n.setup()}))}return Object(h.a)(e,[{key:"pointSymbol",get:function(){if(v)return v;var e=new d.Path.Circle({center:[0,0],radius:4,fillColor:"white",strokeColor:"red"});return v=new d.Symbol(e.rasterize()),e.remove(),v}}],[{key:"mouse",set:function(e){if(e)p=e;else{if(!d)return;p={delta:new d.Point(0,0),point:new d.Point(0,0)}}}}]),Object(h.a)(e,[{key:"setup",value:function(){this.shape=this.pointSymbol.place(this.start),this.shape.parent=this.path.parent,this.animation=u.b.timeline({ease:b}),this.shape.visible=!1}},{key:"destroy",value:function(){var e,t,i=this;null===(e=this.animation)||void 0===e||null===(t=e.kill)||void 0===t||t.call(e),Object(o.each)(this,(function(e,t){return delete i[t]}))}},{key:"refresh",value:function(){var e,t=this.start,i=this.animation.isActive(),n=this.path.segments[this.index],s=(null===(e=p)||void 0===e?void 0:e.point.y)||0,a=n.point.y,o=Math.abs(s-a),l=t.isClose(this.shape.position,.1);if(o<42.5)if(this.animation.clear(),Math.abs(s-t.y)>50)this.snapBack();else{var h=41.5*(s-a>=0?-1:1)+s;n.point.y=h,this.shape.position=n.point}else i||l||this.snapBack();return i||!l}},{key:"snapBack",value:function(){var e=this.start,t=this.shape.position,i=this.path.segments[this.index].point;this.animation.clear(),this.animation.to([i,t],Object(s.a)({x:e.x,y:e.y},f),0)}}]),e}(),w=function(){function e(t){var a=this,o=t.view,h=t.lineSymbol,c=t.y,u=t.segments,v=void 0===u?2:u,p=t.lineStyle,d=void 0===p?{}:p;Object(l.a)(this,e),Object(r.a)(this,"smoothing",{type:"continuous"}),Object(r.a)(this,"group",null),Object(r.a)(this,"path",null),Object(r.a)(this,"shape",null),Object(r.a)(this,"controlPoints",[]);var b=o.size.width,f=o.instance.center;Promise.all([i.e(5),i.e(6)]).then(i.t.bind(null,"IiLU",7)).then((function(e){n=e.default,a.group=new n.Group,a.path=new n.Path(Object(s.a)({parent:a.group,strokeColor:"black",strokeHeight:1},d)),a.shape=h.place([f.x,c]),a.shape.parent=a.group,a.shape.visible=!1;for(var t=[],i=0;i<=v;i+=1){var o=i/v*b,l=new n.Point(o,c),r=new m({path:a.path,start:l,index:i});a.controlPoints.push(r),t.push(l)}a.path.addSegments(t)}))}return Object(h.a)(e,[{key:"destroy",value:function(){var e=this;this.group.remove(),Object(o.each)(this.controlPoints,(function(e){return e.destroy()})),Object(o.each)(this,(function(t,i){return delete e[i]}))}},{key:"update",value:function(){for(var e=!1,t=this.path.segments.length-1,i=1;i<t;i+=1)this.controlPoints[i].refresh()&&(e=!0);e?(this.path.visible=!0,this.shape.visible=!1,this.smoothPath()):(this.path.visible=!1,this.shape.visible=!0)}},{key:"smoothPath",value:function(){this.path.smooth(this.smoothing)}}]),e}(),y=null,j={name:"ReactiveLine",data:function(){return{visible:!1,lineStyle:{strokeColor:"black",strokeWidth:1},view:{project:null,instance:null,size:{width:0,height:0}},line:null,lineSymbol:null,lineRaster:null}},computed:Object(s.a)({},Object(a.b)({touch:"Interface/touch",viewport:"Interface/viewport"})),mounted:function(){var e=this;Promise.all([i.e(5),i.e(6)]).then(i.t.bind(null,"IiLU",7)).then((function(t){y=t.default,e.createView();var i=Object(o.debounce)((function(){e.$nextTick(e.init.bind(e))}),30);e.view.instance.on({frame:function(){var t,i;return null===(t=e.line)||void 0===t||null===(i=t.update)||void 0===i?void 0:i.call(t)},mousemove:function(e){m.mouse=e},mouseleave:function(){m.mouse=null}}),e.$watch("viewport",i),e.init()}))},beforeDestroy:function(){var e,t,i=this;y&&(null===(e=this.line)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e),Object(o.each)(["frame","mousemove","mouseleave"],(function(e){return i.view.instance.off(e)})),this.view.instance.remove(),this.view.project.remove(),delete this.view,delete this.lines)},methods:{createView:function(){y.setup(this.$el);var e=y,t=e.project,i=e.view,n=i.bounds,s=n.width,a=n.height;i.setAutoUpdate(!1),this.view={project:t,instance:i,size:{width:s,height:a}}},init:function(){var e=this;this.$nextTick((function(){var t,i,n=e.view.instance.bounds,s=n.width,a=n.height;e.view.size={width:s,height:a},null===(t=e.line)||void 0===t||null===(i=t.destroy)||void 0===i||i.call(t),e.rasterizeLine(),e.$nextTick((function(){e.line=new w({index:0,view:e.view,y:200,lineSymbol:e.lineSymbol,lineStyle:e.lineStyle})}))}))},rasterizeLine:function(){var e,t=this.view.size.width;null===(e=this.lineRaster)||void 0===e||e.remove();var i=new y.Path(Object(s.a)({segments:[[0,0],[t,0]]},this.lineStyle));i.visible=!0,i.segments=[[0,0],[t,0]],this.lineRaster=i.rasterize(),this.lineSymbol=new y.Symbol(this.lineRaster),i.visible=!1},isInScreen:function(e){this.visible=e},render:function(){this.view.instance&&this.view.instance.update()}}},O=(i("hgOt"),i("KHd+")),k=i("a7WZ"),g=i.n(k),S=Object(O.a)(j,(function(){var e=this.$createElement;return(this._self._c||e)("canvas",{directives:[{name:"observe-scroll",rawName:"v-observe-scroll",value:{callback:this.isInScreen,intersection:{threshold:.1}},expression:" {\n    callback: isInScreen,\n    intersection: {\n      threshold: 0.1,\n    }\n  }"}],staticClass:"canvas",attrs:{resize:""}})}),[],!1,null,"4a5818c6",null);"function"==typeof g.a&&g()(S);t.default=S.exports}}]);